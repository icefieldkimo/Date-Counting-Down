<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Aging Test Completion Countdown</title>
  <meta name="description" content="Three countdown timers." />
  <style>
    :root{--bg:#0b0f19;--fg:#e9eef7;--panel:#131a2a;--panel2:#0f1524;--chip:#0f1524;--accent1:#86a8ff;--accent2:#8ee6ff;--radius:18px}
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--fg);font-family:system-ui,-apple-system,"Noto Sans TC",Segoe UI,Roboto,Arial,sans-serif}
    .wrap{max-width:1100px;margin:0 auto;padding:28px 20px}
    header{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:16px}
    h1{margin:0;font-size:clamp(22px,4.4vw,36px)}
    .chips{display:flex;gap:8px;flex-wrap:wrap}
    .chip{background:var(--chip);padding:6px 10px;border-radius:999px;font-size:12px;opacity:.9}
    .grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:18px}
    @media (max-width:1200px){.grid{grid-template-columns:1fr}}
    .card{background:var(--panel);border-radius:var(--radius);padding:18px;box-shadow:0 10px 34px rgba(0,0,0,.35)}
    .title{margin-bottom:12px;min-height:3.2em;display:flex;align-items:flex-start}
    .title h2{margin:0;font-size:clamp(11px,1.6vw,15px);line-height:1.3;white-space:normal;word-break:break-word;max-height:2.6em;overflow:hidden;}
    .subtitle{opacity:.85;font-size:12px;margin-bottom:14px}
    .timer{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin:6px 0 14px}
    .box{background:var(--panel2);border-radius:14px;padding:14px 6px;text-align:center;min-width:0}
    .num{font-weight:800;font-size:clamp(22px,4vw,38px);line-height:1;word-break:break-word;overflow:hidden;text-overflow:ellipsis}
    .lbl{text-transform:uppercase;letter-spacing:.08em;font-size:11px;opacity:.8;margin-top:6px}
    .bar{height:10px;background:var(--panel2);border-radius:999px;overflow:hidden;margin:2px 0 8px}
    .fill{height:100%;width:0%;background:linear-gradient(90deg,var(--accent1),var(--accent2))}
    .muted{opacity:.7;font-size:12px;margin-top:8px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Aging Test Completion Countdown</h1>
      <div class="chips">
        <span id="tzChip" class="chip"></span>
      </div>
    </header>

    <div class="grid">
      <section class="card" id="card1">
        <div class="title"><h2 id="t1">DOE #7 567 w/ primer 175Nm</h2></div>
        <div class="subtitle"><span id="until1Chip"></span></div>
        <div class="timer" aria-live="polite">
          <div class="box"><div id="d1" class="num">0</div><div class="lbl">Days</div></div>
          <div class="box"><div id="h1" class="num">00</div><div class="lbl">Hours</div></div>
          <div class="box"><div id="m1" class="num">00</div><div class="lbl">Minutes</div></div>
          <div class="box"><div id="s1" class="num">00</div><div class="lbl">Seconds</div></div>
        </div>
        <div class="bar"><div id="fill1" class="fill"></div></div>
        <div class="muted" id="foot1"></div>
      </section>

      <section class="card" id="card2">
        <div class="title"><h2 id="t2">DOE #9~15, 554 and other sealants on both threads with 175N/m torque</h2></div>
        <div class="subtitle"><span id="until2Chip"></span></div>
        <div class="timer" aria-live="polite">
          <div class="box"><div id="d2" class="num">0</div><div class="lbl">Days</div></div>
          <div class="box"><div id="h2" class="num">00</div><div class="lbl">Hours</div></div>
          <div class="box"><div id="m2" class="num">00</div><div class="lbl">Minutes</div></div>
          <div class="box"><div id="s2" class="num">00</div><div class="lbl">Seconds</div></div>
        </div>
        <div class="bar"><div id="fill2" class="fill"></div></div>
        <div class="muted" id="foot2"></div>
      </section>

      <section class="card" id="card3">
        <div class="title"><h2 id="t3">DOE #18, 554 on male side with 175N/m torque</h2></div>
        <div class="subtitle"><span id="until3Chip"></span></div>
        <div class="timer" aria-live="polite">
          <div class="box"><div id="d3" class="num">0</div><div class="lbl">Days</div></div>
          <div class="box"><div id="h3" class="num">00</div><div class="lbl">Hours</div></div>
          <div class="box"><div id="m3" class="num">00</div><div class="lbl">Minutes</div></div>
          <div class="box"><div id="s3" class="num">00</div><div class="lbl">Seconds</div></div>
        </div>
        <div class="bar"><div id="fill3" class="fill"></div></div>
        <div class="muted" id="foot3"></div>
      </section>
    </div>
  </div>

<script>
(function(){
  const tz = Intl.DateTimeFormat().resolvedOptions().timeZone;
  document.getElementById('tzChip').textContent = `TZ: ${tz}`;

  function setDateTime(year, month, day, hour, minute, second){
    return new Date(year, month - 1, day, hour, minute, second);
  }

  const targets = [
    { until: setDateTime(2025, 9, 4, 17, 0, 0), start: setDateTime(2025, 8, 13, 0, 0, 0), days: 'd1', hours: 'h1', mins: 'm1', secs: 's1', fill: 'fill1', foot: 'foot1', untilChip: 'until1Chip' },
    { until: setDateTime(2025, 9, 12, 17, 0, 0), start: setDateTime(2025, 7, 10, 0, 1, 0), days: 'd2', hours: 'h2', mins: 'm2', secs: 's2', fill: 'fill2', foot: 'foot2', untilChip: 'until2Chip' },
    { until: setDateTime(2025, 9, 22, 17, 0, 0), start: setDateTime(2025, 8, 11, 0, 1, 0), days: 'd3', hours: 'h3', mins: 'm3', secs: 's3', fill: 'fill3', foot: 'foot3', untilChip: 'until3Chip' }
  ];

  targets.forEach(cfg => {
    if(cfg.until){
      document.getElementById(cfg.untilChip).textContent = `Until: ${cfg.until.toLocaleString()}`;
    } else {
      document.getElementById(cfg.untilChip).textContent = `Not started yet`;
    }
  });

  function tick(){
    const now = new Date();
    targets.forEach(cfg => {
      if(!cfg.until){
        document.getElementById(cfg.foot).textContent = "Not started yet";
        return;
      }
      const diff = cfg.until - now;
      const clamped = Math.max(0, diff);
      const days = Math.floor(clamped / 86400000);
      const hours = Math.floor((clamped % 86400000) / 3600000);
      const mins = Math.floor((clamped % 3600000) / 60000);
      const secs = Math.floor((clamped % 60000) / 1000);
      document.getElementById(cfg.days).textContent = days;
      document.getElementById(cfg.hours).textContent = String(hours).padStart(2,'0');
      document.getElementById(cfg.mins).textContent = String(mins).padStart(2,'0');
      document.getElementById(cfg.secs).textContent = String(secs).padStart(2,'0');

      // 修正進度條
      if(cfg.fill && cfg.start){
        const total = cfg.until - cfg.start;
        if(now < cfg.start){
          document.getElementById(cfg.fill).style.width = '0%';
        } else if(now >= cfg.until){
          document.getElementById(cfg.fill).style.width = '100%';
        } else {
          const elapsed = now - cfg.start;
          const p = (elapsed / total) * 100;
          document.getElementById(cfg.fill).style.width = p + '%';
        }
      }

      document.getElementById(cfg.foot).textContent = diff <= 0 ? "Time's up!" : `Ends at ${cfg.until.toLocaleString()}`;
    });
  }
  tick();
  setInterval(tick, 1000);
})();
</script>
</body>
</html>
